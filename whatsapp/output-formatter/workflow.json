{
  "nodes": [
    {
      "parameters": {
        "method": "POST",
        "url": "=https://api.chakrahq.com/v1/ext/plugin/whatsapp/3ad985e8-bca9-4c34-a725-08b28566c8e7/api/v22.0/947816548405132/messages",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ $json.payload }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2544,
        -2224
      ],
      "id": "25ee0494-86d4-4156-85a6-a70889448114",
      "name": "Send Session Message",
      "credentials": {
        "httpHeaderAuth": {
          "id": "R34w3tbLFASjE8WW",
          "name": "Header Auth account"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 1
          },
          "conditions": [
            {
              "id": "list-check",
              "leftValue": "={{ $json.output }}",
              "rightValue": "__LIST_MESSAGE__",
              "operator": {
                "type": "string",
                "operation": "contains"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        2160,
        -2320
      ],
      "id": "0f877688-2260-4c5e-8ed2-619ce5d028e3",
      "name": "List mi Text mi?"
    },
    {
      "parameters": {
        "jsCode": "// =============================================\n// LIST MESSAGE PARSER + ERROR HANDLING\n// =============================================\n\nconst output = $input.item.json.output;\n\ntry {\n  // 1. Prefix'i temizle\n  const jsonStr = output.replace('__LIST_MESSAGE__', '').trim();\n  \n  // 2. JSON parse et\n  const listData = JSON.parse(jsonStr);\n  \n  // =============================================\n  // 3. VALIDATION\n  // =============================================\n  \n  // Gerekli fieldlar var mÄ±?\n  if (!listData.header || !listData.body) {\n    console.warn('âš ï¸ Missing header/body, adding defaults');\n    listData.header = listData.header || \"SeÃ§enekler\";\n    listData.body = listData.body || \"LÃ¼tfen seÃ§im yapÄ±n\";\n  }\n  \n  // Sections var mÄ±?\n  if (!listData.sections || listData.sections.length === 0) {\n    throw new Error('No sections in list');\n  }\n  \n  // En az 1 row var mÄ±?\n  const totalRows = listData.sections.reduce((sum, s) => \n    sum + (s.rows?.length || 0), 0\n  );\n  \n  if (totalRows === 0) {\n    throw new Error('All sections empty');\n  }\n  \n  // Defaults ekle\n  listData.footer = listData.footer || \"Palm Nail&Beauty Bar\";\n  listData.button = listData.button || \"SeÃ§enekler\";\n  \n  // =============================================\n  // 4. WHATSAPP FORMAT'A DÃ–NÃœÅTÃœR\n  // =============================================\n  \n  const payload = {\n    \"messaging_product\": \"whatsapp\",\n    \"to\": $('whatsapp_instagram_api').item.json.body.entry[0].changes[0].value.contacts[0].wa_id,\n    \"type\": \"interactive\",\n    \"interactive\": {\n      \"type\": \"list\",\n      \"header\": {\n        \"type\": \"text\",\n        \"text\": listData.header\n      },\n      \"body\": {\n        \"text\": listData.body\n      },\n      \"footer\": {\n        \"text\": listData.footer\n      },\n      \"action\": {\n        \"button\": listData.button,\n        \"sections\": listData.sections\n      }\n    }\n  };\n  \n  // =============================================\n  // 5. SUCCESS RETURN\n  // =============================================\n  \n  return {\n    json: {\n      payload: payload,\n      success: true,\n      list_info: {\n        option_count: totalRows,\n        sections: listData.sections.length,\n        header: listData.header\n      }\n    }\n  };\n  \n} catch (error) {\n  // =============================================\n  // 6. ERROR HANDLING - FALLBACK TO TEXT\n  // =============================================\n  \n  console.error('âŒ List parse error:', error.message);\n  console.error('ğŸ“„ Raw output:', output.substring(0, 500));\n  \n  // Text mesaj olarak fallback\n  const textPayload = {\n    \"messaging_product\": \"whatsapp\",\n    \"to\": $('whatsapp_instagram_api').item.json.body.entry[0].changes[0].value.contacts[0].wa_id,\n    \"type\": \"text\",\n    \"text\": {\n      \"body\": \"SeÃ§enekleri dÃ¼zgÃ¼n gÃ¶rÃ¼ntÃ¼leyemiyorum. Ä°ÅŸte alternatifler:\\n\\n\" + \n              output.replace('__LIST_MESSAGE__', '').substring(0, 800),\n      \"preview_url\": false\n    }\n  };\n  \n  return {\n    json: {\n      payload: textPayload,\n      success: false,\n      error: error.message,\n      fallback: true\n    }\n  };\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2368,
        -2416
      ],
      "id": "80ed89ba-06c3-4632-91d4-e0a64ab4d8db",
      "name": "Parse List JSON"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.chakrahq.com/v1/ext/plugin/whatsapp/3ad985e8-bca9-4c34-a725-08b28566c8e7/api/v22.0/947816548405132/messages",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ $json.payload }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2544,
        -2416
      ],
      "id": "baef9d07-f770-484c-81f9-15a78a6c11be",
      "name": "Send List Message",
      "credentials": {
        "httpHeaderAuth": {
          "id": "R34w3tbLFASjE8WW",
          "name": "Header Auth account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// =============================================\n// TEXT MESSAGE PAYLOAD BUILDER\n// =============================================\n\n// AlÄ±cÄ± numarasÄ±nÄ± webhook verisinden Ã§ek\nconst to = $('whatsapp_instagram_api').item.json.body.entry[0].changes[0].value.contacts[0].wa_id;\n\n// Output metnini gÃ¼venli ÅŸekilde al, maksimum 4000 karakterle sÄ±nÄ±rla\nconst bodyText = String($json.output ?? '').slice(0, 4000);\n\n// WhatsApp formatÄ±na uygun payload oluÅŸtur\nconst payload = {\n  messaging_product: 'whatsapp',\n  to,\n  type: 'text',\n  text: {\n    body: bodyText,\n    preview_url: false\n  }\n};\n\n// Payload'u dÃ¶ndÃ¼r\nreturn [\n  {\n    json: {\n      payload\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2368,
        -2224
      ],
      "id": "094dd6b9-2e46-4ad7-b674-e710b130429c",
      "name": "Code1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.output }}",
        "options": {
          "systemMessage": "# WhatsApp Output Formatter Agent\n\nSen WhatsApp mesajlarÄ±nÄ± optimize eden bir formatlayÄ±cÄ±sÄ±n. \n\n## TEK GÃ–REVÄ°N\n\nRandevu asistanÄ±ndan gelen cevabÄ± analiz et:\n1. **Liste gerekiyor mu?** â†’ Liste formatÄ±na Ã§evir (`__LIST_MESSAGE__` ekle)\n2. **Normal metin mi?** â†’ Aynen bÄ±rak\n\n**NOT:** BoÅŸ output kontrolÃ¼ yapma, bu zaten yapÄ±ldÄ±. Sen sadece formatlama yap.\n\n---\n\n## KURAL 1: NE ZAMAN LÄ°STE KULLAN?\n\n### âœ… Liste Kullan (2+ seÃ§enek varsa):\n\n**A) MÃ¼saitlik Alternatifleri**\nTetikleyici:\n- \"seÃ§enekler\", \"alternatifler\"\n- \"1ï¸âƒ£\", \"2ï¸âƒ£\", \"3ï¸âƒ£\" veya \"1)\", \"2)\", \"3)\"\n- Tarih + saat + fiyat (2+ satÄ±r)\n\n**B) Randevu Listesi**\nTetikleyici:\n- \"randevularÄ±nÄ±z\", \"randevu listesi\"\n- Birden fazla randevu\n\n**C) Hizmet/BÃ¶lge SeÃ§enekleri**\nTetikleyici:\n- 3+ seÃ§enek listesi\n- \"Hangi bÃ¶lge?\", \"SeÃ§enekler:\"\n\n### âŒ Liste Kullanma:\n\n- Onay mesajlarÄ± (\"oluÅŸturuldu\", \"iptal edildi\")\n- Tek seÃ§enek\n- Sorular (bilgi isteme)\n- Sohbet/bilgilendirme\n\n---\n\n## KURAL 2: SECTION YAPISI (KRÄ°TÄ°K!)\n\n### âš ï¸ ZORUNLU KURAL: HER SEÃ‡ENEK = AYRI SECTION\n\n**YanlÄ±ÅŸ âŒ:**\n```json\n{\n  \"sections\": [\n    {\n      \"title\": \"15 KasÄ±m Cumartesi\",\n      \"rows\": [\n        {\"title\": \"10:00-10:30 (Sevcan)\"},\n        {\"title\": \"12:45-13:15 (Sevcan)\"},\n        {\"title\": \"18:00-18:30 (Sevcan)\"}\n      ]\n    }\n  ]\n}\n```\n\n**DoÄŸru âœ…:**\n```json\n{\n  \"sections\": [\n    {\n      \"title\": \"ğŸ“… 15 Kas Cmt 10:00\",\n      \"rows\": [{\"title\": \"ğŸ’… Sevcan (30dk)\"}]\n    },\n    {\n      \"title\": \"ğŸ“… 15 Kas Cmt 12:45\",\n      \"rows\": [{\"title\": \"ğŸ’… Sevcan (30dk)\"}]\n    },\n    {\n      \"title\": \"ğŸ“… 15 Kas Cmt 18:00\",\n      \"rows\": [{\"title\": \"ğŸ’… Sevcan (30dk)\"}]\n    }\n  ]\n}\n```\n\n---\n\n## KURAL 3: SECTION ve ROW TITLE FORMAT\n\n### WhatsApp API Limitler:\n\n- **Header:** Max 60 karakter\n- **Body:** Max 4096 karakter\n- **Footer:** Max 60 karakter\n- **Button:** Max 20 karakter\n- **Section Title:** Max 24 karakter âš ï¸\n- **Row Title:** Max 24 karakter âš ï¸\n- **Row Description:** Max 72 karakter\n\n---\n\n## KURAL 4: TITLE FORMAT ÅABLONLARI\n\n### Section Title (Max 24 char):\n**Format:** `ğŸ“… [Tarih] [Saat]`\n\n**Ã–rnekler:**\n- `ğŸ“… 15 Kas Cmt 10:00` (20 char) âœ…\n- `ğŸ“… 15 Kas Cmt 18:30` (20 char) âœ…\n- `ğŸ“… 16 Kas Paz 14:00` (20 char) âœ…\n\n**Ay KÄ±saltmalarÄ±:**\n- Ocakâ†’Oca, Åubatâ†’Åub, Martâ†’Mar, Nisanâ†’Nis\n- MayÄ±sâ†’May, Haziranâ†’Haz, Temmuzâ†’Tem, AÄŸustosâ†’AÄŸu\n- EylÃ¼lâ†’Eyl, Ekimâ†’Eki, KasÄ±mâ†’Kas, AralÄ±kâ†’Ara\n\n**GÃ¼n KÄ±saltmalarÄ±:**\n- Pazartesiâ†’Pzt, SalÄ±â†’Sal, Ã‡arÅŸambaâ†’Ã‡ar\n- PerÅŸembeâ†’Per, Cumaâ†’Cum, Cumartesiâ†’Cmt, Pazarâ†’Paz\n\n---\n\n### Row Title (Max 24 char):\n**Format:** `ğŸ’… [Uzman] ([SÃ¼re]dk)`\n\n**Ã–rnekler:**\n- `ğŸ’… Sevcan (30dk)` (16 char) âœ…\n- `ğŸ’… PÄ±nar (120dk)` (16 char) âœ…\n- `ğŸ’… Ceren (180dk)` (16 char) âœ…\n\n**Ã‡oklu Uzman (Grup Randevu):**\n- `ğŸ’… Sevcan & PÄ±nar` (17 char) âœ…\n- `ğŸ’… S & P (150dk)` (15 char) âœ…\n\n---\n\n### Row Description (Max 72 char):\n**Format:** `[Hizmet] - [Fiyat]â‚º`\n\n**Ã–rnekler:**\n- `ManikÃ¼r - 450â‚º` (14 char) âœ…\n- `Protez TÄ±rnak - 1.000â‚º` (22 char) âœ…\n- `KalÄ±cÄ± Oje ve ManikÃ¼r - 1.450â‚º` (32 char) âœ…\n\n**Grup Randevu:**\n- `Protez TÄ±rnak (PÄ±nar) + ManikÃ¼r (Sevcan) - Toplam 1.450â‚º` (59 char) âœ…\n\n---\n\n## KURAL 5: EMOJÄ° KULLANIMI\n\n### Ä°zin Verilen Emoji'ler:\n\n**Section Title:**\n- ğŸ“… (tarih iÃ§in)\n\n**Row Title:**\n- ğŸ’… (tÄ±rnak hizmetleri: manikÃ¼r, pedikÃ¼r, protez, kalÄ±cÄ± oje)\n- ğŸ’† (cilt bakÄ±mÄ±, lifting, masaj)\n- âœ¨ (kaÅŸ, laminasyon)\n- ğŸ”¥ (lazer epilasyon)\n\n**Emoji Byte HesabÄ±:**\nEmoji **2-4 byte** sayÄ±lÄ±r. GÃ¼venli limit: **20 karakter** (emoji dahil)\n\n---\n\n## KURAL 6: ID TEMÄ°ZLEME\n```javascript\nfunction cleanId(text) {\n  return text\n    .toLowerCase()\n    .replace(/:/g, '')      // 14:00 â†’ 1400\n    .replace(/-/g, '')      // 14:00-16:00 â†’ 14001600\n    .replace(/Ä±/g, 'i')\n    .replace(/ÅŸ/g, 's')\n    .replace(/ÄŸ/g, 'g')\n    .replace(/Ã¼/g, 'u')\n    .replace(/Ã¶/g, 'o')\n    .replace(/Ã§/g, 'c')\n    .replace(/\\s+/g, '_')\n    .replace(/[^a-z0-9_]/g, '');\n}\n\n// Ã–rnek:\n// \"alt_1_15_10:00_sevcan\" â†’ \"alt_1_15_1000_sevcan\"\n```\n\n---\n\n## Ã–RNEKLER\n\n### Ã–rnek 1: Tek GÃ¼n - Tek Uzman - Ã‡oklu Saat\n\n**Input:**\n```\nHarika! Sizin iÃ§in en yakÄ±n uygun manikÃ¼r randevularÄ±:\n\n1ï¸âƒ£ 15 KasÄ±m, 10:00-10:30 - Sevcan - 450â‚º\n2ï¸âƒ£ 15 KasÄ±m, 12:45-13:15 - Sevcan - 450â‚º\n3ï¸âƒ£ 15 KasÄ±m, 18:00-18:30 - Sevcan - 450â‚º\n\nHangisi uygun? ğŸŒ´\n```\n\n**Output:**\n```\n__LIST_MESSAGE__\n{\"header\":\"MÃ¼saitlik SeÃ§enekleri\",\"body\":\"Harika! Sizin iÃ§in en yakÄ±n uygun manikÃ¼r randevularÄ±:\",\"button\":\"SeÃ§\",\"sections\":[{\"title\":\"ğŸ“… 15 Kas Cmt 10:00\",\"rows\":[{\"id\":\"alt_1_15_1000_sevcan\",\"title\":\"ğŸ’… Sevcan (30dk)\",\"description\":\"ManikÃ¼r - 450â‚º\"}]},{\"title\":\"ğŸ“… 15 Kas Cmt 12:45\",\"rows\":[{\"id\":\"alt_2_15_1245_sevcan\",\"title\":\"ğŸ’… Sevcan (30dk)\",\"description\":\"ManikÃ¼r - 450â‚º\"}]},{\"title\":\"ğŸ“… 15 Kas Cmt 18:00\",\"rows\":[{\"id\":\"alt_3_15_1800_sevcan\",\"title\":\"ğŸ’… Sevcan (30dk)\",\"description\":\"ManikÃ¼r - 450â‚º\"}]}]}\n```\n\n---\n\n### Ã–rnek 2: Tek GÃ¼n - Ã‡oklu Uzman\n\n**Input:**\n```\nYarÄ±n iÃ§in alternatifler:\n\n1ï¸âƒ£ 15 KasÄ±m, 14:00-16:45 - PÄ±nar - 1.450â‚º\n2ï¸âƒ£ 15 KasÄ±m, 16:00-18:45 - Ceren - 1.300â‚º\n3ï¸âƒ£ 15 KasÄ±m, 18:00-20:00 - PÄ±nar - 1.450â‚º\n\nHangisi uygun? ğŸŒ´\n```\n\n**Output:**\n```\n__LIST_MESSAGE__\n{\"header\":\"MÃ¼saitlik SeÃ§enekleri\",\"body\":\"YarÄ±n iÃ§in alternatifler:\",\"button\":\"SeÃ§\",\"sections\":[{\"title\":\"ğŸ“… 15 Kas Cmt 14:00\",\"rows\":[{\"id\":\"alt_1_15_1400_pinar\",\"title\":\"ğŸ’… PÄ±nar (165dk)\",\"description\":\"KalÄ±cÄ± Oje - 1.450â‚º\"}]},{\"title\":\"ğŸ“… 15 Kas Cmt 16:00\",\"rows\":[{\"id\":\"alt_2_15_1600_ceren\",\"title\":\"ğŸ’… Ceren (165dk)\",\"description\":\"KalÄ±cÄ± Oje - 1.300â‚º\"}]},{\"title\":\"ğŸ“… 15 Kas Cmt 18:00\",\"rows\":[{\"id\":\"alt_3_15_1800_pinar\",\"title\":\"ğŸ’… PÄ±nar (120dk)\",\"description\":\"KalÄ±cÄ± Oje - 1.450â‚º\"}]}]}\n```\n\n---\n\n### Ã–rnek 3: Ã‡oklu GÃ¼n\n\n**Input:**\n```\n27 Ekim'de mÃ¼sait deÄŸil ama yakÄ±n alternatifler:\n\n1ï¸âƒ£ 28 Ekim, 10:00-12:00 - PÄ±nar - 1.000â‚º\n2ï¸âƒ£ 28 Ekim, 14:00-17:00 - Ceren - 800â‚º\n3ï¸âƒ£ 29 Ekim, 10:00-12:00 - PÄ±nar - 1.000â‚º\n\nHangisi uygun? ğŸŒ´\n```\n\n**Output:**\n```\n__LIST_MESSAGE__\n{\"header\":\"MÃ¼saitlik SeÃ§enekleri\",\"body\":\"27 Ekim'de mÃ¼sait deÄŸil ama yakÄ±n alternatifler:\",\"button\":\"SeÃ§\",\"sections\":[{\"title\":\"ğŸ“… 28 Eki Sal 10:00\",\"rows\":[{\"id\":\"alt_1_28_1000_pinar\",\"title\":\"ğŸ’… PÄ±nar (120dk)\",\"description\":\"Protez TÄ±rnak - 1.000â‚º\"}]},{\"title\":\"ğŸ“… 28 Eki Sal 14:00\",\"rows\":[{\"id\":\"alt_2_28_1400_ceren\",\"title\":\"ğŸ’… Ceren (180dk)\",\"description\":\"Protez TÄ±rnak - 800â‚º\"}]},{\"title\":\"ğŸ“… 29 Eki Ã‡ar 10:00\",\"rows\":[{\"id\":\"alt_3_29_1000_pinar\",\"title\":\"ğŸ’… PÄ±nar (120dk)\",\"description\":\"Protez TÄ±rnak - 1.000â‚º\"}]}]}\n```\n\n---\n\n### Ã–rnek 4: Grup Randevu\n\n**Input:**\n```\nAnnenizle birlikte randevu seÃ§enekleri:\n\n1ï¸âƒ£ 15 KasÄ±m, 14:00 - PÄ±nar & Sevcan - 1.450â‚º (Paralel)\n2ï¸âƒ£ 15 KasÄ±m, 16:00 - Ceren & PÄ±nar - 1.450â‚º (Paralel)\n\nHangisi uygun? ğŸŒ´\n```\n\n**Output:**\n```\n__LIST_MESSAGE__\n{\"header\":\"Grup Randevu\",\"body\":\"Annenizle birlikte randevu seÃ§enekleri:\",\"button\":\"SeÃ§\",\"sections\":[{\"title\":\"ğŸ“… 15 Kas Cmt 14:00\",\"rows\":[{\"id\":\"alt_1_15_1400_pinarsevcan\",\"title\":\"ğŸ’… PÄ±nar & Sevcan\",\"description\":\"Protez TÄ±rnak + ManikÃ¼r (Paralel) - 1.450â‚º\"}]},{\"title\":\"ğŸ“… 15 Kas Cmt 16:00\",\"rows\":[{\"id\":\"alt_2_15_1600_cerenpinar\",\"title\":\"ğŸ’… Ceren & PÄ±nar\",\"description\":\"Protez TÄ±rnak + ManikÃ¼r (Paralel) - 1.450â‚º\"}]}]}\n```\n\n---\n\n### Ã–rnek 5: Randevu Listesi (Ä°ptal/DeÄŸiÅŸtirme)\n\n**Input:**\n```\nRandevularÄ±nÄ±z:\n\n1) 5 KasÄ±m, 17:00 - Protez TÄ±rnak (PÄ±nar)\n2) 8 KasÄ±m, 10:00 - Lazer TÃ¼m Bacak (Sevcan)\n\nHangisini iptal istersiniz?\n```\n\n**Output:**\n```\n__LIST_MESSAGE__\n{\"header\":\"ğŸ“… RandevularÄ±nÄ±z\",\"body\":\"Hangi randevunuzu iptal veya deÄŸiÅŸtirmek istersiniz?\",\"button\":\"SeÃ§\",\"sections\":[{\"title\":\"ğŸ“… 5 Kas Sal 17:00\",\"rows\":[{\"id\":\"appt_05_1700_pt_pinar\",\"title\":\"ğŸ’… PÄ±nar (120dk)\",\"description\":\"Protez TÄ±rnak - 1.000â‚º\"}]},{\"title\":\"ğŸ“… 8 Kas Cum 10:00\",\"rows\":[{\"id\":\"appt_08_1000_lb_sevcan\",\"title\":\"ğŸ”¥ Sevcan (40dk)\",\"description\":\"Lazer TÃ¼m Bacak - 800â‚º\"}]}]}\n```\n\n---\n\n## KURAL 7: NORMAL METÄ°N\n\nListe gerekmiyorsa â†’ Input'u **AYNEN** dÃ¶ndÃ¼r.\n\n**Ã–nemli:** HiÃ§bir deÄŸiÅŸiklik yapma, emoji'leri koruy, formatÄ± koru.\n```\nInput: \"âœ… Randevunuz oluÅŸturuldu! ğŸŒ´\"\nOutput: \"âœ… Randevunuz oluÅŸturuldu! ğŸŒ´\"\n```\n\n---\n\n## KRÄ°TÄ°K HATIRLATMALAR\n\n1. âœ… **HER SEÃ‡ENEK = AYRI SECTION** (zorunlu)\n2. âœ… Section title: `ğŸ“… [Tarih] [Saat]` (max 24 char)\n3. âœ… Row title: `ğŸ’… [Uzman] ([SÃ¼re]dk)` (max 24 char)\n4. âœ… Description: `[Hizmet] - [Fiyat]â‚º` (max 72 char)\n5. âœ… Her section'da **sadece 1 row**\n6. âœ… JSON tek satÄ±r, compact format\n7. âœ… ID'lerde Ã¶zel karakter yok\n8. âœ… Emoji byte'larÄ±nÄ± hesaba kat\n\n**NOT:** Asla boÅŸ output Ã¼retme. Her zaman bir ÅŸey dÃ¶ndÃ¼r."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        1776,
        -1968
      ],
      "id": "caf5efd5-d18e-4dc5-b890-b218fe63548c",
      "name": "AI Agent3"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1776,
        -1808
      ],
      "id": "b2a8d560-9f2c-4b99-91fb-ad80f1e7f864",
      "name": "Google Gemini Chat Model3",
      "credentials": {
        "googlePalmApi": {
          "id": "se2OE5eDuUT8LiFG",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    }
  ],
  "connections": {
    "List mi Text mi?": {
      "main": [
        [
          {
            "node": "Parse List JSON",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Code1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Parse List JSON": {
      "main": [
        [
          {
            "node": "Send List Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send List Message": {
      "main": [
        []
      ]
    },
    "Code1": {
      "main": [
        [
          {
            "node": "Send Session Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent3": {
      "main": [
        [
          {
            "node": "List mi Text mi?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent3",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "afd9177fa22bd401d1ec287c9dde7939ce50fb767c8e226f6de704d0a8fffb41"
  }
}
